<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>     
	<META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
	<LINK href="resources/styles.css" type=text/css rel=stylesheet>
	<p class=Title> 
	<font face="Tahoma" size="3">
	    <center> 
	        <b>Programming EZ-USB&reg; FX3&trade; Processor Port as Synchronous Address Data Multiplexed Interface</b>
	    </center></p> 
	</font>
   </head>
 
  <body>
   <font face="Tahoma" size="2">
      
      <p class=Title>Introduction</p>
      <p class=BodyText>
		One of the key features of EZ-USB&reg; FX3&trade; is the flexibility and programmability of the General Programmable Interface (GPIF&trade;II). GPIF&trade;II is a programmable state machine that enables a flexible interface to adapt to the processor interface required by the user. GPIF&trade;II state machine is defined by a set of programmable registers. These registers are to be configured by the firmware application running on the FX3. The register configuration that programs GPIF&trade;II for a specific interface  can be generated by the software tool GPIF&trade;II Designer. This document provides details on how to generate and use Synchronous Address Data Multiplexed Interface on GPIF&trade;II using the tool.
		</p>
	<p class=Title>Synchronous Address Data Multiplexed Interface</p>

	<p class=BodyText>
		<p><b>Feature Highlights </b></p>
        <p class=BodyText>
          <ul>
		<li class=BodyText>Synchronous Interface with Address and Data Multiplexed</li>
		<li class=BodyText>Direct access to both the configuration registers and buffers of EZ-USB&reg; FX3&trade;</li>		
	  </ul>
	</p>

	<p style="text-align: center; line-height: 1.15; margin: 0px 0px 13px 0px;"><img src="resources/sync_admux_pin_diagram.jpg" width="430" height="231" vspace="1" hspace="1" border="0" alt=""></p>
	<p style="text-align: center; line-height: 1.15; margin: 0px 0px 13px 0px;"><span style="font-family: 'Calibri'; font-weight: bold;">Figure 1.  Synchronous Address Data Multiplex Interface Diagram</span></p>
	
	<p class=BodyText>
	Synchronous Address Data Multiplexed interface is ideal for applications where an external processor or device needs to perform data read/write accesses to FX3's buffers or registers. Figure 1 shows the interface diagram for the Synchronous Address Data Multiplexed interface.
	</p>
    <p class=Title>Programming GPIF&trade;II as Synchronous Address Data Multiplexed</p>
    <p class=BodyText>
	The set of register values that programs the GPIF&trade;II interface as Synchronous Address Data Multiplexed is generated as a data structure supported the FX3 firmware framework API. The software tool GPIF&trade;II Designer and the firmware framework library are part of the EZ-USB&reg; FX3&trade; Software Development Kit. GPIF&trade;II Designer generates a header file containing data structures and macros that seamlessly integrates with the FX3 firmware framework API. A step by step procedure to use GPIF&trade;II Designer to configure FX3 as Synchronous Address Data Multiplexed is as follows
    </p>
        <p class=BodyText>
          <ol>
            <li class=BodyText>Open the sync_admux using GPIF&trade;II Designer. The project can be opened from the "Cypress Supplied Interface" on the start page.</li>
            <li class=BodyText>Make necessary customizations. Data Bus Width and Burst Word Count can be modified to suite the target environment</li>
            <li class=BodyText>Build the project to generate GPIF&trade;II configuration header file using the "Build Project" command available under the Build menu. The header file with cyfxgpif2config.h will be generated under the project folder. Copy the header file to <TBD> under the firmware project folder.</li>
            <li class=BodyText>In the firmware application load the GPIF&trade;II configuration and start the state machine using the GPIF&trade;II configuration API <Link TBD> </li>
          </ol>
        </p>

      <p class=Title>Configurable Parameters</p>

    <p class=BodyText>
        Following parameters of the interface can be modified to suite the target environment. To make changes, open the sync_admux using GPIF&trade;II Designer as mentioned in step 1. The configurable parameters and available options are provided on the left side of the Customization Tab. 		
		<br/>
		<br/>	
		<b>FX3 peripherals used:</b> SPI, UART,I2C,I2S can be selected.
		<br/>
		<br/>
		<b>Data bus width:</b> Data bus width of GPIF II can be 16 bit or 32 bit. 32 Bit data bus width is not supported if SPI is selected.
        <br/>
		<br/>
        <b>Burst Word Count:</b> Maximum number of words that can be transferred at a time in burst access. 
		<br/>
		<br/>
        <b>Pin mapping:</b> Mapping of the interface signals (CE#, WE#, ADV# and RDY) to the FX3 pin 
        connections can be modified.         
        <br>
        <i> Note: To swap pins currently allocated pin must be freed. A pin can be freed by allocating 
        to any other available pin temporarily.</i>		
        <br/>
    </p>

<p class=Title>Interface Description & Timing</p>

<p class=BodyText>
Interface provides four different slave accesses.
    <ul>
        <li class=BodyText>Single Read - Reading from the specified register or buffer</li>
        <li class=BodyText>Single Write - Writing to the specified register or buffer</li> 
        <li class=BodyText>Burst Read - Reading from buffer</li>
		<li class=BodyText>Burst Write - writing to a buffer</li>        
    </ul>  
</p>
<p class=BodyText>
<b>Single Read</b>
<br/>
	For Single Read Operation, both CE# and OE# are asserted. Data is driven on the interface after two clock cycle of assertion of OE. RDY is made high to validate the data on the interface. The addresses must be latched prior to the write operation. ADV# must be low during the Address phase of operation. ADV# must be high during the Data phase of operation. Register is read by making the msb bit of address to one. Figure 2 shows the timing and sequence for Synchronous Address Data Multiplexed Single Read accesses.	
<p style="text-align: center; line-height: 1.15; margin: 0px 0px 13px 0px;"><img src="resources/sync_admux_read_timing.jpg" width="650" vspace="1" hspace="1" border="0" alt=""></p>
<p style="text-align: center; line-height: 1.15; margin: 0px 0px 13px 0px;"><span style="font-family: 'Calibri'; font-weight: bold;">Figure 2 Timing Diagram - Synchronous Address Data Multiplexed Single Read</span></p>
</p>

<p class=BodyText>
<b>Single Write</b>
</p>

<p class=BodyText>
	For Single Write Operation, both CE# and WE# are asserted. Valid data need to be placed on the bus after 2 clock cycles. RDY signal is used to acknowledge for write operation. The addresses must be latched prior to the write operation. ADV# must be low during the Address phase and high during the Data phase of operation. Register is written by making the msb bit of address to one. Figure 3 shows the timing and sequence for Synchronous Address Data Multiplexed Single Write accesses.     
</p>

<p style="text-align: center; line-height: 1.15; margin: 0px 0px 13px 0px;"><img src="resources/sync_admux_write_timing.jpg" width="650" vspace="1" hspace="1" border="0" alt=""></p>
<p style="text-align: center; line-height: 1.15; margin: 0px 0px 13px 0px;"><span style="font-family: 'Calibri'; font-weight: bold;">Figure 3 Timing Diagram - Synchronous Address Data Multiplexed Single Write</span></p>

<p class=BodyText>
<b>Burst Read</b>
<br>
	For burst reads, CE# and OE# must be asserted throughout the burst. RDY is made high to validate the data on the interface. The addresses must be latched prior to the burst read operation. ADV# must be low during the Address phase and high during the Data phase of operation. Figure 4 shows the timing and sequence for Synchronous Address Data Multiplexed Burst Read accesses. 
</p>

<p style="text-align: center; line-height: 1.15; margin: 0px 0px 13px 0px;"><img src="resources/sync_admux_burst_read_timing.jpg" width="650" vspace="1" hspace="1" border="0" alt=""></p>
<p style="text-align: center; line-height: 1.15; margin: 0px 0px 13px 0px;"><span style="font-family: 'Calibri'; font-weight: bold;">Figure 4 Timing Diagram - Synchronous Address Data Multiplexed burst read</span></p>

<p class=BodyText>
<b>Burst Write</b>
<br>
	For burst write, CE# and WE# must be asserted throughout the burst. RDY signal is used to acknowledge for burst write operation. The addresses must be latched prior to the write operation. ADV# must be low during the Address phase and high during the Data phase of operation. Figure 5 shows the timing and sequence for Synchronous Address Data Multiplexed Burst Write accesses. 
</p>

<p style="text-align: center; line-height: 1.15; margin: 0px 0px 13px 0px;"><img src="resources/sync_admux_burst_write_timing.jpg" width="650"  vspace="1" hspace="1" border="0" alt=""></p>
<p style="text-align: center; line-height: 1.15; margin: 0px 0px 13px 0px;"><span style="font-family: 'Calibri'; font-weight: bold;">Figure 5 Timing Diagram - Synchronous Address Data Multiplexed burst write</span></p>
<p class=Title>Summary</p>
<p class=BodyText>
The data presented here is indicative only and must not be seen as a substitute for the full specification 
from which it is drawn. Please visit 
<a href="http://www.cypress.com/?id=3526">Cypress EZ-USB&reg; FX3&trade;</a> website for detailed and 
latest Datasheet.

</p>

<p class=Title>Notice of Disclaimer</p>
<p class=BodyText>
© Cypress Semiconductor Corporation, 2012. The information contained herein is subject to 
change without notice. Cypress Semiconductor Corporation assumes no responsibility 
for the use of any circuitry other than circuitry embodied in a Cypress Semiconductor product. 
Nor does it convey or imply any license under patent or other rights. 
Cypress Semiconductor does not authorize its products for use as critical components in 
life-support systems where a malfunction or failure may reasonably be expected to result 
in significant injury to the user. The inclusion of Cypress Semiconductor products in 
life-support systems application implies that the manufacturer assumes all risk of such 
use and in doing so indemnifies Cypress Semiconductor against all charges.
</p>
    </font>
  </body>
</html>
